<!doctype html>
<html lang="%lang%">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" href="%sveltekit.assets%/favicon.png" />
		<link rel="alternate" type="application/atom+xml" href="/rss.xml" />

		<script type="module">
			document.documentElement.setAttribute('color-scheme', 'dark')
		</script>

		<!-- Prevent dismissed banners from flashing on reload by hiding them before first paint,
		     same technique as the color-scheme script above. Matches localStorage keys set by
		     Banner.svelte (banner_<id>_hidden) and CampaignBanner.svelte (campaign_banner_<id>_hidden). -->
		<script>
			try {
				var css = ''
				for (var i = 0; i < localStorage.length; i++) {
					var key = localStorage.key(i)
					if (!key || localStorage.getItem(key) !== 'true') continue
					var m
					if ((m = key.match(/^banner_(.+)_hidden$/))) {
						css += '[data-banner-id="' + m[1] + '"]{display:none!important}'
					} else if ((m = key.match(/^campaign_banner_(.+)_hidden$/))) {
						css += '[data-campaign-banner-id="' + m[1] + '"]{display:none!important}'
					}
				}
				if (css) {
					var s = document.createElement('style')
					s.textContent = css
					document.head.appendChild(s)
				}
			} catch (e) {}
		</script>

		<!-- Google Tag Manager -->
		<script>
			;(function (w, d, s, l, i) {
				w[l] = w[l] || []
				w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' })
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != 'dataLayer' ? '&l=' + l : ''
				j.async = true
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl
				f.parentNode.insertBefore(j, f)
			})(window, document, 'script', 'dataLayer', 'GTM-MZS328RW')
		</script>
		<!-- End Google Tag Manager -->

		%sveltekit.head%
	</head>

	<body data-sveltekit-preload-data="hover">
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-ABCDEFGH"
				height="0"
				width="0"
				style="display: none; visibility: hidden"
			></iframe
		></noscript>
		<!-- End Google Tag Manager (noscript) -->
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
